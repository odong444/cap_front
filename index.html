<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìº¡ì±  í’€ì´ - ë¦¬ì›Œë“œ ì ë¦½</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.4/socket.io.min.js"></script>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 500px; margin: 0 auto; }
        
        .card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            margin-bottom: 20px;
        }
        
        h1 { text-align: center; color: #333; margin-bottom: 10px; font-size: 28px; }
        .subtitle { text-align: center; color: #666; margin-bottom: 30px; }
        
        /* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
        .tabs {
            display: flex;
            margin-bottom: 20px;
            background: #f0f0f0;
            border-radius: 10px;
            padding: 5px;
        }
        .tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            border: none;
            background: none;
            cursor: pointer;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s;
        }
        .tab.active {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        .stat { text-align: center; }
        .stat-value { font-size: 32px; font-weight: bold; color: #667eea; }
        .stat-label { font-size: 12px; color: #666; margin-top: 5px; }
        
        input, select {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
            margin-bottom: 15px;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }
        
        button {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        button:hover { transform: translateY(-2px); }
        button:active { transform: translateY(0); }
        button:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        
        .btn-primary { background: linear-gradient(135deg, #667eea, #764ba2); color: white; }
        .btn-secondary { background: #f0f0f0; color: #333; margin-top: 10px; }
        .btn-danger { background: #dc3545; color: white; margin-top: 10px; }
        .btn-success { background: #28a745; color: white; }
        
        .captcha-container {
            text-align: center;
            margin: 20px 0;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 15px;
        }
        .captcha-image {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .store-name {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
            text-align: center;
            padding: 10px;
            background: #e8f4fd;
            border-radius: 8px;
        }
        .store-name span { font-weight: 600; color: #333; }
        
        .message {
            padding: 15px 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            text-align: center;
            font-weight: 500;
        }
        .message.success { background: #d4edda; color: #155724; }
        .message.error { background: #f8d7da; color: #721c24; }
        .message.info { background: #cce5ff; color: #004085; }
        
        .hidden { display: none !important; }
        
        /* ë¦¬ì›Œë“œ íŒì—… */
        .overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 999;
            backdrop-filter: blur(5px);
        }
        .popup {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px;
            border-radius: 25px;
            box-shadow: 0 25px 80px rgba(0,0,0,0.4);
            text-align: center;
            z-index: 1000;
            min-width: 300px;
            animation: popIn 0.3s ease;
        }
        @keyframes popIn {
            from { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
            to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        .popup h2 { margin-bottom: 20px; }
        .reward-amount {
            font-size: 56px;
            font-weight: bold;
            color: #28a745;
            margin: 20px 0;
        }
        
        /* íˆìŠ¤í† ë¦¬ */
        .history-list {
            max-height: 300px;
            overflow-y: auto;
        }
        .history-item {
            display: flex;
            justify-content: space-between;
            padding: 12px;
            border-bottom: 1px solid #eee;
        }
        .history-item:last-child { border-bottom: none; }
        .history-amount { font-weight: bold; }
        .history-amount.positive { color: #28a745; }
        .history-amount.negative { color: #dc3545; }
        
        /* ì„œë²„ ìƒíƒœ */
        .server-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        .status-dot {
            display: inline-block;
            width: 8px; height: 8px;
            border-radius: 50%;
            margin-right: 5px;
        }
        .status-dot.online { background: #28a745; }
        .status-dot.offline { background: #dc3545; }
        
        .loading {
            display: inline-block;
            width: 20px; height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
            vertical-align: middle;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
<div class="container">
    <!-- ë¡œê·¸ì¸ í™”ë©´ -->
    <div id="login-screen" class="card">
        <h1>ğŸ¯ ìº¡ì±  í’€ì´</h1>
        <p class="subtitle">ë¬¸ì œë¥¼ í’€ê³  ë¦¬ì›Œë“œë¥¼ ì ë¦½í•˜ì„¸ìš”!</p>
        
        <input type="text" id="user-id" placeholder="ì•„ì´ë””" autocomplete="username">
        <input type="password" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸" 
               autocomplete="current-password" onkeypress="if(event.keyCode==13) login()">
        <button class="btn-primary" onclick="login()">ë¡œê·¸ì¸ / íšŒì›ê°€ì…</button>
        
        <p style="text-align: center; margin-top: 20px; font-size: 12px; color: #999;">
            ì²˜ìŒì´ì‹œë©´ ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í›„ ë°”ë¡œ ê°€ì…ë©ë‹ˆë‹¤
        </p>
    </div>
    
    <!-- ë©”ì¸ í™”ë©´ -->
    <div id="main-screen" class="card hidden">
        <h1>ğŸ¯ ìº¡ì±  í’€ì´</h1>
        <p class="subtitle">í™˜ì˜í•©ë‹ˆë‹¤, <span id="display-user"></span>ë‹˜!</p>
        
        <!-- íƒ­ -->
        <div class="tabs">
            <button class="tab active" onclick="showTab('work')">ğŸ“ ì‘ì—…</button>
            <button class="tab" onclick="showTab('rewards')">ğŸ’° ë¦¬ì›Œë“œ</button>
            <button class="tab" onclick="showTab('withdraw')">ğŸ§ ì¶œê¸ˆ</button>
        </div>
        
        <div class="stats">
            <div class="stat">
                <div class="stat-value" id="total-rewards">0</div>
                <div class="stat-label">ğŸ’° ë³´ìœ  í¬ì¸íŠ¸</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="total-solved">0</div>
                <div class="stat-label">âœ… í•´ê²°í•œ ë¬¸ì œ</div>
            </div>
        </div>
        
        <div id="message-area"></div>
        
        <!-- ì‘ì—… íƒ­ -->
        <div id="tab-work">
            <div id="captcha-area" class="hidden">
                <div class="store-name">ğŸª ìŠ¤í† ì–´: <span id="store-name"></span></div>
                <div class="captcha-container">
                    <img id="captcha-image" class="captcha-image" src="" alt="ìº¡ì± ">
                </div>
                <input type="text" id="captcha-answer" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" 
                       onkeypress="if(event.keyCode==13) submitAnswer()" autocomplete="off">
                <button class="btn-primary" onclick="submitAnswer()">âœ“ ì œì¶œ</button>
                <button class="btn-secondary" onclick="refreshCaptcha()">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
                <button class="btn-danger" onclick="skipTask()">â­ï¸ ìŠ¤í‚µ</button>
            </div>
            
            <div id="start-area">
                <button class="btn-primary" onclick="requestTask()">ğŸš€ ì‘ì—… ì‹œì‘í•˜ê¸°</button>
            </div>
        </div>
        
        <!-- ë¦¬ì›Œë“œ íƒ­ -->
        <div id="tab-rewards" class="hidden">
            <h3 style="margin-bottom: 15px;">ğŸ“œ ì ë¦½ ë‚´ì—­</h3>
            <div class="history-list" id="rewards-history">
                <p style="text-align: center; color: #999;">ë¡œë”© ì¤‘...</p>
            </div>
        </div>
        
        <!-- ì¶œê¸ˆ íƒ­ -->
        <div id="tab-withdraw" class="hidden">
            <h3 style="margin-bottom: 15px;">ğŸ§ ì¶œê¸ˆ ì‹ ì²­</h3>
            <p style="margin-bottom: 15px; color: #666; font-size: 14px;">ìµœì†Œ ì¶œê¸ˆì•¡: 10,000P</p>
            
            <input type="number" id="withdraw-amount" placeholder="ì¶œê¸ˆ ê¸ˆì•¡" min="10000">
            <select id="bank-name">
                <option value="">ì€í–‰ ì„ íƒ</option>
                <option value="ì¹´ì¹´ì˜¤ë±…í¬">ì¹´ì¹´ì˜¤ë±…í¬</option>
                <option value="êµ­ë¯¼ì€í–‰">êµ­ë¯¼ì€í–‰</option>
                <option value="ì‹ í•œì€í–‰">ì‹ í•œì€í–‰</option>
                <option value="ìš°ë¦¬ì€í–‰">ìš°ë¦¬ì€í–‰</option>
                <option value="í•˜ë‚˜ì€í–‰">í•˜ë‚˜ì€í–‰</option>
                <option value="ë†í˜‘ì€í–‰">ë†í˜‘ì€í–‰</option>
                <option value="í† ìŠ¤ë±…í¬">í† ìŠ¤ë±…í¬</option>
            </select>
            <input type="text" id="account-number" placeholder="ê³„ì¢Œë²ˆí˜¸">
            <input type="text" id="account-holder" placeholder="ì˜ˆê¸ˆì£¼">
            <button class="btn-success" onclick="requestWithdraw()">ì¶œê¸ˆ ì‹ ì²­</button>
            
            <h3 style="margin: 20px 0 15px;">ğŸ“‹ ì¶œê¸ˆ ë‚´ì—­</h3>
            <div class="history-list" id="withdraw-history">
                <p style="text-align: center; color: #999;">ë¡œë”© ì¤‘...</p>
            </div>
        </div>
        
        <button class="btn-secondary" onclick="logout()" style="margin-top: 20px;">ë¡œê·¸ì•„ì›ƒ</button>
    </div>
</div>

<!-- ë¦¬ì›Œë“œ íŒì—… -->
<div id="reward-popup" class="hidden">
    <div class="overlay" onclick="closeRewardPopup()"></div>
    <div class="popup">
        <h2>ğŸ‰ ì •ë‹µì…ë‹ˆë‹¤!</h2>
        <div class="reward-amount">+<span id="reward-amount">100</span>P</div>
        <p>í¬ì¸íŠ¸ê°€ ì ë¦½ë˜ì—ˆìŠµë‹ˆë‹¤!</p>
        <button class="btn-primary" onclick="closeRewardPopup()" style="width: auto; padding: 15px 50px;">
            í™•ì¸
        </button>
    </div>
</div>

<!-- ì„œë²„ ìƒíƒœ -->
<div class="server-status">
    <span class="status-dot" id="status-dot"></span>
    <span id="status-text">ì—°ê²° ì¤‘...</span>
    <span id="queue-info"></span>
</div>

<script>
// ==================== ì„¤ì • ====================
// Railway API ì„œë²„ URL (ë°°í¬ í›„ ìˆ˜ì •)
const API_SERVER = 'capapi-production.up.railway.app';

const socket = io(API_SERVER);
let currentUser = null;
let currentTaskId = null;

// ==================== ì—°ê²° ìƒíƒœ ====================
socket.on('connect', () => {
    document.getElementById('status-dot').classList.add('online');
    document.getElementById('status-dot').classList.remove('offline');
    document.getElementById('status-text').textContent = 'ì—°ê²°ë¨';
    
    // ìœ ì € room ì°¸ê°€
    if (currentUser) {
        socket.emit('join', { user_id: currentUser });
    }
    
    updateServerStatus();
});

socket.on('disconnect', () => {
    document.getElementById('status-dot').classList.remove('online');
    document.getElementById('status-dot').classList.add('offline');
    document.getElementById('status-text').textContent = 'ì—°ê²° ëŠê¹€';
});

function updateServerStatus() {
    fetch(API_SERVER + '/api/status')
        .then(r => r.json())
        .then(data => {
            document.getElementById('queue-info').textContent = ` | ëŒ€ê¸°: ${data.queue_size}ê±´`;
        })
        .catch(() => {});
}
setInterval(updateServerStatus, 5000);

// ==================== íƒ­ ====================
function showTab(tabName) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('[id^="tab-"]').forEach(t => t.classList.add('hidden'));
    
    event.target.classList.add('active');
    document.getElementById('tab-' + tabName).classList.remove('hidden');
    
    if (tabName === 'rewards') loadRewardsHistory();
    if (tabName === 'withdraw') loadWithdrawHistory();
}

// ==================== ë¡œê·¸ì¸ ====================
function login() {
    const userId = document.getElementById('user-id').value.trim();
    const password = document.getElementById('password').value.trim();
    
    if (!userId || !password) {
        alert('ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
        return;
    }
    
    fetch(API_SERVER + '/api/login', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({user_id: userId, password: password})
    })
    .then(r => r.json())
    .then(data => {
        if (data.success) {
            currentUser = userId;
            document.getElementById('display-user').textContent = userId;
            document.getElementById('total-rewards').textContent = data.rewards.toLocaleString();
            document.getElementById('total-solved').textContent = data.solved;
            
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('main-screen').classList.remove('hidden');
            
            localStorage.setItem('captcha_user', userId);
            
            // room ì°¸ê°€
            socket.emit('join', { user_id: userId });
        } else {
            alert(data.message);
        }
    })
    .catch(err => {
        alert('ì„œë²„ ì—°ê²° ì‹¤íŒ¨');
        console.error(err);
    });
}

function logout() {
    currentUser = null;
    currentTaskId = null;
    localStorage.removeItem('captcha_user');
    document.getElementById('login-screen').classList.remove('hidden');
    document.getElementById('main-screen').classList.add('hidden');
}

// ==================== ì‘ì—… ====================
function requestTask() {
    if (!currentUser) return alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
    
    showMessage('<span class="loading"></span> ì‘ì—…ì„ ìš”ì²­ ì¤‘...', 'info');
    document.getElementById('start-area').classList.add('hidden');
    socket.emit('request_task', {user_id: currentUser});
}

function submitAnswer() {
    const answer = document.getElementById('captcha-answer').value.trim();
    if (!answer) return alert('ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”.');
    
    showMessage('<span class="loading"></span> í™•ì¸ ì¤‘...', 'info');
    socket.emit('submit_answer', {
        user_id: currentUser,
        task_id: currentTaskId,
        answer: answer
    });
}

function refreshCaptcha() {
    showMessage('<span class="loading"></span> ìƒˆë¡œê³ ì¹¨ ì¤‘...', 'info');
    socket.emit('refresh_captcha', {user_id: currentUser, task_id: currentTaskId});
}

function skipTask() {
    if (confirm('ì´ ì‘ì—…ì„ ê±´ë„ˆë›°ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        document.getElementById('captcha-area').classList.add('hidden');
        document.getElementById('start-area').classList.remove('hidden');
        document.getElementById('message-area').innerHTML = '';
        socket.emit('skip_task', {user_id: currentUser, task_id: currentTaskId});
        currentTaskId = null;
    }
}

// ==================== ë¦¬ì›Œë“œ ====================
function loadRewardsHistory() {
    fetch(API_SERVER + '/api/rewards/history/' + currentUser)
        .then(r => r.json())
        .then(data => {
            const container = document.getElementById('rewards-history');
            if (!data.success || !data.history.length) {
                container.innerHTML = '<p style="text-align: center; color: #999;">ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            container.innerHTML = data.history.map(item => `
                <div class="history-item">
                    <div>
                        <div>${item.reason}</div>
                        <div style="font-size: 12px; color: #999;">${new Date(item.created_at).toLocaleString()}</div>
                    </div>
                    <div class="history-amount ${item.amount > 0 ? 'positive' : 'negative'}">
                        ${item.amount > 0 ? '+' : ''}${item.amount.toLocaleString()}P
                    </div>
                </div>
            `).join('');
        });
}

// ==================== ì¶œê¸ˆ ====================
function requestWithdraw() {
    const amount = parseInt(document.getElementById('withdraw-amount').value);
    const bankName = document.getElementById('bank-name').value;
    const accountNumber = document.getElementById('account-number').value.trim();
    const accountHolder = document.getElementById('account-holder').value.trim();
    
    if (!amount || amount < 10000) return alert('ìµœì†Œ ì¶œê¸ˆì•¡ì€ 10,000Pì…ë‹ˆë‹¤.');
    if (!bankName) return alert('ì€í–‰ì„ ì„ íƒí•˜ì„¸ìš”.');
    if (!accountNumber) return alert('ê³„ì¢Œë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
    if (!accountHolder) return alert('ì˜ˆê¸ˆì£¼ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
    
    fetch(API_SERVER + '/api/withdraw', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
            user_id: currentUser,
            amount: amount,
            bank_name: bankName,
            account_number: accountNumber,
            account_holder: accountHolder
        })
    })
    .then(r => r.json())
    .then(data => {
        if (data.success) {
            alert('ì¶œê¸ˆ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
            
            // ì”ì•¡ ê°±ì‹ 
            const current = parseInt(document.getElementById('total-rewards').textContent.replace(/,/g, ''));
            document.getElementById('total-rewards').textContent = (current - amount).toLocaleString();
            
            // í¼ ì´ˆê¸°í™”
            document.getElementById('withdraw-amount').value = '';
            document.getElementById('account-number').value = '';
            document.getElementById('account-holder').value = '';
            
            loadWithdrawHistory();
        } else {
            alert(data.message);
        }
    });
}

function loadWithdrawHistory() {
    fetch(API_SERVER + '/api/withdrawals/' + currentUser)
        .then(r => r.json())
        .then(data => {
            const container = document.getElementById('withdraw-history');
            if (!data.success || !data.withdrawals.length) {
                container.innerHTML = '<p style="text-align: center; color: #999;">ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            const statusText = {pending: 'ì²˜ë¦¬ì¤‘', completed: 'ì™„ë£Œ', rejected: 'ê±°ì ˆ'};
            const statusColor = {pending: '#ffc107', completed: '#28a745', rejected: '#dc3545'};
            
            container.innerHTML = data.withdrawals.map(item => `
                <div class="history-item">
                    <div>
                        <div>${item.bank_name} ${item.account_number}</div>
                        <div style="font-size: 12px; color: #999;">${new Date(item.created_at).toLocaleString()}</div>
                    </div>
                    <div>
                        <div style="font-weight: bold;">${item.amount.toLocaleString()}P</div>
                        <div style="font-size: 12px; color: ${statusColor[item.status]}">${statusText[item.status]}</div>
                    </div>
                </div>
            `).join('');
        });
}

// ==================== UI ====================
function showMessage(html, type) {
    document.getElementById('message-area').innerHTML = `<div class="message ${type}">${html}</div>`;
}

function showRewardPopup(amount) {
    document.getElementById('reward-amount').textContent = amount;
    document.getElementById('reward-popup').classList.remove('hidden');
}

function closeRewardPopup() {
    document.getElementById('reward-popup').classList.add('hidden');
    document.getElementById('captcha-answer').value = '';
    document.getElementById('captcha-area').classList.add('hidden');
    document.getElementById('start-area').classList.remove('hidden');
    document.getElementById('message-area').innerHTML = '';
    currentTaskId = null;
}

// ==================== Socket ì´ë²¤íŠ¸ ====================
socket.on('captcha_image', (data) => {
    currentTaskId = data.task_id;
    document.getElementById('captcha-image').src = 'data:image/png;base64,' + data.image;
    document.getElementById('store-name').textContent = data.store_name || 'ì•Œ ìˆ˜ ì—†ìŒ';
    document.getElementById('captcha-area').classList.remove('hidden');
    document.getElementById('start-area').classList.add('hidden');
    document.getElementById('message-area').innerHTML = '';
    document.getElementById('captcha-answer').value = '';
    document.getElementById('captcha-answer').focus();
});

socket.on('captcha_retry', (data) => {
    document.getElementById('captcha-image').src = 'data:image/png;base64,' + data.image;
    document.getElementById('captcha-answer').value = '';
    showMessage(data.message, 'error');
    document.getElementById('captcha-answer').focus();
});

socket.on('task_complete', (data) => {
    const rewards = document.getElementById('total-rewards');
    rewards.textContent = data.total_rewards ? data.total_rewards.toLocaleString() : 
        (parseInt(rewards.textContent.replace(/,/g, '')) + data.rewards).toLocaleString();
    
    const solved = document.getElementById('total-solved');
    solved.textContent = parseInt(solved.textContent) + 1;
    
    showRewardPopup(data.rewards);
});

socket.on('task_failed', (data) => {
    showMessage(data.message, 'error');
});

socket.on('answer_submitted', (data) => {
    showMessage(data.message, 'info');
});

socket.on('no_task', (data) => {
    showMessage(data.message, 'info');
    document.getElementById('start-area').classList.remove('hidden');
});

socket.on('error', (data) => {
    showMessage(data.message, 'error');
});

socket.on('new_task_available', () => {
    // ìƒˆ ì‘ì—… ì•Œë¦¼
    updateServerStatus();
});

// ==================== ì´ˆê¸°í™” ====================
window.onload = function() {
    const savedUser = localStorage.getItem('captcha_user');
    if (savedUser) {
        document.getElementById('user-id').value = savedUser;
    }
};
</script>
</body>
</html>
